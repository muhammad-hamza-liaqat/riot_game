<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summoner Profile</title>
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"></script>
    <style>
        body {
            background: linear-gradient(to bottom, #2b2d42, #8d99ae);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }
        .card {
            background: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            padding: 1.5rem;
            max-width: 400px;
            width: 100%;
            transition: transform 0.3s ease-in-out;
        }
        .header {
            background: #4a5568;
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .field-label {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 0.5rem;
        }
        .field-select,
        .field-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            color: #4a5568;
            margin-bottom: 1rem;
            outline: none;
            transition: border-color 0.2s;
        }
        .field-select:focus,
        .field-input:focus {
            border-color: #4a5568;
        }
        .btn {
            display: flex;
            justify-content: center;
        }
        .btn button {
            background-color: #3182ce;
            color: white;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            transition: background-color 0.3s ease;
        }
        .btn button:hover {
            background-color: #2b6cb0;
        }
        .error-message {
            color: red;
            text-align: center;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="header">
            <h1 class="text-2xl font-bold">Profile</h1>
        </div>

        <div class="field">
            <label class="field-label">Region</label>
            <select id="region" class="field-select">
                <option value="NA1">NA1</option>
                <option value="RU">RU</option>
                <option value="KR">KR</option>
                <option value="BR1">BR1</option>
                <option value="OC1">OC1</option>
                <option value="JP1">JP1</option>
                <option value="EUN1">EUN1</option>
                <option value="EUW1">EUW1</option>
                <option value="TR1">TR1</option>
                <option value="LA1">LA1</option>
                <option value="LA2">LA2</option>
            </select>
        </div>

        <div class="field">
            <label class="field-label">Summoner Name</label>
            <input type="text" id="summoner_name" class="field-input" placeholder="Enter your summoner name">
        </div>

        <div class="field">
            <label class="field-label">Language</label>
            <select id="language" class="field-select">
                <option value="cs">Czech (Czech Republic)</option>
                <option value="el">Greek (Greece)</option>
                <option value="pl">Polish (Poland)</option>
                <option value="ro">Romanian (Romania)</option>
                <option value="hu">Hungarian (Hungary)</option>
                <option value="en_GB">English (United Kingdom)</option>
                <option value="de">German (Germany)</option>
                <option value="es_ES">Spanish (Spain)</option>
                <option value="it">Italian (Italy)</option>
                <option value="fr">French (France)</option>
                <option value="ja">Japanese (Japan)</option>
                <option value="ko">Korean (Korea)</option>
                <option value="es_MX">Spanish (Mexico)</option>
                <option value="es_AR">Spanish (Argentina)</option>
                <option value="pt_BR">Portuguese (Brazil)</option>
                <option value="en_US">English (United States)</option>
                <option value="en">English (English)</option>
                <option value="ru">Russian (Russia)</option>
                <option value="tr">Turkish (Turkey)</option>
                <option value="ms">Malay (Malaysia)</option>
                <option value="en_PH">English (Republic of Philippines)</option>
                <option value="en_SG">English (Singapore)</option>
                <option value="th">Thai (Thailand)</option>
                <option value="vi">Vietnamese (Viet Nam)</option>
                <option value="id">Indonesian (Indonesia)</option>
                <option value="zh_MY">Chinese (Malaysia)</option>
                <option value="zh_CN">Chinese (China)</option>
                <option value="zh_TW">Chinese (Taiwan)</option>
            </select>
        </div>

        <div class="field">
            <label class="field-label">API Key</label>
            <input type="text" id="api" class="field-input" placeholder="Enter your API">
        </div>
        

        <div class="btn">
            <button class="btn bg-blue-500 hover:bg-blue-700" id="submitBtn">Submit</button>
        </div>
        <div id="error-message" class="error-message"></div>
    </div>

    <script>
        document.getElementById("submitBtn").addEventListener("click", function() {
            const summonerName = document.getElementById("summoner_name").value.trim();
            const region = document.getElementById("region").value;
            const language = document.getElementById("language").value;
            const apiKey = document.getElementById("api").value.trim();
            const errorMessage = document.getElementById("error-message");

            if (!summonerName) {
                errorMessage.textContent = "Please enter a summoner name.";
                return;
            }
            if (!apiKey) {
                errorMessage.textContent = "Please enter an API key.";
                return;
            }

            const data = {
                summoner_name: summonerName,
                region: region,
                language: language,
                api: apiKey
            };

            fetch('/get-riot-matches/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    return response.json().then(data => {
                        throw new Error(data.error || 'Failed to fetch match details');
                    });
                }
            })
            .then(html => {
                document.open();
                document.write(html);
                document.close();
            })
            .catch(error => {
                // console.error('Error:', error);
                errorMessage.textContent = error.message || 'An unexpected error occurred.';
            });
        });
    </script>
</body>
</html>